<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noir Essence | Ürün Detayı</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <nav class="navbar">
        <div class="logo">NOIR<span>ESSENCE</span></div>
        <ul class="nav-links">
            <li><a href="index.html">Koleksiyon</a></li>
            <li><a href="hakkimizda.html">Hikayemiz</a></li>
            <li><a href="iletisim.html">İletişim</a></li>
            <li class="cart-box">
                <a href="sepet.html" style="color: inherit; text-decoration: none;">
                    <i class="fa-solid fa-bag-shopping"></i>
                    <span class="cart-count" id="nav-cart-count">0</span>
                </a>
            </li>
        </ul>
        <div class="mobile-menu-icon"><i class="fa-solid fa-bars"></i></div>
    </nav>

    <section class="container" style="margin-top: 2rem;">
        <div style="display: flex; flex-wrap: wrap; gap: 3rem; align-items: center;">
            
            <div style="flex: 1; min-width: 300px;">
                <img id="p-image" src="" alt="Ürün Detay" style="width: 100%; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
            </div>

            <div style="flex: 1; min-width: 300px;">
                <h1 id="p-title" style="font-family: 'Playfair Display', serif; font-size: 3rem; color: #fff;">...</h1>
                <p id="p-price" style="color: var(--gold); font-size: 1.5rem; margin: 1rem 0; font-weight: bold;">...</p>
                
                <p id="p-desc" style="margin-bottom: 2rem; color: #ccc;">
                    ...
                </p>

                <ul style="margin-bottom: 2rem; list-style: none; color: #aaa;">
                    <li><i class="fa-solid fa-droplet" style="color:var(--gold)"></i> <span id="p-note1">...</span></li>
                    <li><i class="fa-solid fa-droplet" style="color:var(--gold)"></i> <span id="p-note2">...</span></li>
                </ul>

                <button id="add-btn" class="btn-main" style="cursor: pointer; border:none;">Sepete Ekle</button>
            </div>
        </div>
    </section>

    <footer>
        <p>&copy; 2025 Noir Essence. Tüm hakları saklıdır.</p>
    </footer>

    <script src="script.js"></script>

    <script>
        const params = new URLSearchParams(window.location.search);
        const productId = params.get('id');

        // Ürün Veritabanı (Fiyatları sayı ve yazı olarak ayırdık)
        const products = {
            'midnight': {
                title: 'Midnight Oud',
                price: 2450, // Hesaplama için sayı
                displayPrice: '₺2.450', // Görünüm için yazı
                desc: 'Gecenin gizemini teninizde hissedin. Siyah orkide, nadir baharatlar ve tütsünün büyüleyici karışımı.',
                img: 'https://images.unsplash.com/photo-1594035910387-fea47794261f?auto=format&fit=crop&w=800&q=80',
                note1: 'Üst Nota: Yasemin, Gardenya',
                note2: 'Alt Nota: Paçuli, Sandal Ağacı'
            },
            'rose': {
                title: 'Velvet Rose',
                price: 1890,
                displayPrice: '₺1.890',
                desc: 'Isparta güllerinin kadifemsi dokunuşu. Zarif, romantik ve akılda kalıcı bir bahar esintisi.',
                img: 'https://images.unsplash.com/photo-1585120040315-2241b774ad0f?auto=format&fit=crop&w=800&q=80',
                note1: 'Üst Nota: Şam Gülü, Bergamot',
                note2: 'Alt Nota: Beyaz Misk, Amber'
            },
            'marine': {
                title: 'Deep Marine',
                price: 2100,
                displayPrice: '₺2.100',
                desc: 'Okyanusun derinliklerinden gelen ferahlık. Tuzlu deniz notaları ve narenciyenin canlandırıcı etkisi.',
                // ÇALIŞAN GÜNCEL LİNK:
                img: 'https://images.unsplash.com/photo-1541643600914-78b084683601?auto=format&fit=crop&w=800&q=80',
                note1: 'Üst Nota: Deniz Tuzu, Limon',
                note2: 'Alt Nota: Sedir Ağacı, Yosun'
            }
        };

        const selected = products[productId] || products['midnight'];

        // Bilgileri Ekrana Bas
        document.getElementById('p-image').src = selected.img;
        document.getElementById('p-title').innerText = selected.title;
        // Ekrana yazılı fiyatı basıyoruz
        document.getElementById('p-price').innerText = selected.displayPrice; 
        document.getElementById('p-desc').innerText = selected.desc;
        document.getElementById('p-note1').innerText = selected.note1;
        document.getElementById('p-note2').innerText = selected.note2;

        // SEPETE EKLEME (GÜNCELLENMİŞ SİSTEM)
        const btn = document.getElementById('add-btn');
        
        btn.addEventListener('click', () => {
            // 1. Mevcut sepet listesini çek (Yoksa boş liste başlat)
            let cart = JSON.parse(localStorage.getItem('sepet')) || [];
            
            // 2. Yeni ürünü listeye ekle (Tüm detaylarıyla)
            cart.push({
                name: selected.title,
                price: selected.price,
                displayPrice: selected.displayPrice,
                image: selected.img
            });
            
            // 3. Listeyi tekrar kaydet
            localStorage.setItem('sepet', JSON.stringify(cart));
            
            // 4. Navbar'daki sayıyı güncelle (script.js'teki fonksiyon)
            updateCartCount();

            // Buton Efekti
            btn.innerText = "Eklendi!";
            btn.style.backgroundColor = "#fff";
            btn.style.color = "#000";
            setTimeout(() => { 
                btn.innerText = "Sepete Ekle"; 
                btn.style.backgroundColor = ""; 
                btn.style.color = "";
            }, 1000);
        });
    </script>

</body>
</html>
